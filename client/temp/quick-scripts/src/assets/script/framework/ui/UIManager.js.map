{"version":3,"sources":["assets\\script\\framework\\ui\\UIManager.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { UIBase } from \"./UIBase\";\nimport { IsNullOrEmpty } from \"../util/StringUtil\";\nimport { ArrayRemove } from \"../util/ArrayUtil\";\nimport Clog, { ClogKey } from \"../clog/Clog\";\nimport { EnumUICloseTween, EnumUIOpenTween } from \"./UIEnum\";\nimport { ResManager } from \"../res/ResManager\";\nimport { AudioManager } from \"../audio/AudioManager\";\n\n\n\n\n\n\n\n//by ming.lei 2018.09.03\nexport  class UIManager  {\n\n    public static _root: cc.Node;\n    //放大动画时长\n    private static scaleTweenTime = 0.2;\n    //渐隐渐出动画时长\n    private static feadTweenTime = 0.5;\n    //上拉动画时长\n    private static pullTweenTime = 0.2;\n    //遮罩的透明度（alpha值）\n    private static maskColorA = 180;\n    //已打开的UI的对象List   注：用array不用map的原因，主要原因是map是无序的集合，别再帮我改成map了各位大爷\n    private static OpenedUI: Array<UIBase> = new Array<UIBase>();\n    //正在打开的UI的名称List\n    private static OnOpenUITag: Array<string> = new Array<string>();\n\n    //初始化\n    public static Init(root: cc.Node) {\n        this._root = root\n    }\n\n    //打开UI\n    public static async OpenUI(UIClass: { new(): UIBase }): Promise<UIBase> {\n        return new Promise(async (resolve) => {\n            let targetName = new UIClass().PrefabName\n            if (IsNullOrEmpty(targetName)) {\n                Clog.Error('Open UI -> UI Name is null! ')\n                return null;\n            }\n\n            //已打开的情况下\n            let target = this.OpenedUI.find(item => item.PrefabName == targetName)\n            if (target != null) {\n                this.PrintOpenedUIList('Open UI -> UI Name is opened! name:' + targetName)\n                ArrayRemove(this.OpenedUI, target)  //移除\n\n                this.OpenedUI.push(target)          //放队尾\n                this.SortOrder();                   //显示在最上层\n                return;\n            }\n\n            //正在打开的情况下\n            let isOnOpen = this.OnOpenUITag.find(item => item == targetName)\n            if (isOnOpen) {\n                Clog.Warn(ClogKey.UI, 'Open UI -> but UI is OnOpen, name:' + targetName)\n                return;\n            }\n\n            //未打开的情况\n            this.OnOpenUITag.push(targetName)\n            this.PrintOnOpenUIList('Open UI -> before Open UI with name:' + targetName)\n\n            //从正在打开的UI List中移除\n            let RemoveFromOnOpen = () => {\n                let isOnOpen = this.OnOpenUITag.find(item => item == targetName)\n                if (isOnOpen) {\n                    Clog.Trace(ClogKey.UI, \"remove target Name from OnOpen List!\")\n                    ArrayRemove(this.OnOpenUITag, targetName)\n                }\n                else {\n                    Clog.Error(\"can not find onOpen UI name, targetName:\" + targetName)\n                }\n                this.PrintOnOpenUIList('Open UI -> After Open UI with name:' + targetName)\n            }\n\n            //加载UI\n            ResManager.LoadRes(targetName, cc.Prefab, (error: Error, prefab: cc.Prefab) => {\n                if (error) {\n                    RemoveFromOnOpen()\n                    Clog.Error('UIManager >> GetInstance >> node is null!, name:' + targetName + \",err\" + JSON.stringify(error))\n                    return;\n                }\n                let node = cc.instantiate(prefab);\n                let targetUI = node.addComponent(UIClass)\n                targetUI.PrefabName = targetName;\n                this._root.addChild(node);\n                node.setPosition(0, 0)\n                //从onOpen UI List 中移除该已打开的UI\n                RemoveFromOnOpen()\n\n                //在已打开的UI List 中添加该UI\n                this.OpenedUI.push(targetUI)\n                //调整UI层级\n                this.SortOrder();\n                //打印层级\n                this.PrintOpenedUIList('After Open UI >>' + targetName)\n\n                //UI打开动画\n                switch (targetUI.OpenTween) {\n                    case EnumUIOpenTween.None:\n                        {\n                            if (targetUI.Mask) {\n                                targetUI.Mask.active = true;\n                                targetUI.Mask.runAction(cc.fadeTo(0.2, this.maskColorA));\n                            }\n\n                            resolve(targetUI);\n\n                        }\n                        break;\n                    case EnumUIOpenTween.Scale:\n                        {\n                            //动画音效\n                            AudioManager.PlaySound('S_OpenUI');\n\n                            //动画\n                            let OpenConstScale = node.scale\n                            let action1 = cc.callFunc(() => {\n                                //遮罩不参与动画\n                                if (targetUI.Mask) {\n                                    targetUI.Mask.active = false;\n                                }\n                                node.scale = 0.2\n                            });\n                            let action2 = cc.scaleTo(this.scaleTweenTime, OpenConstScale, OpenConstScale).easing(cc.easeBezierAction(OpenConstScale - 0.1, OpenConstScale + 0.2, OpenConstScale + 0.1, OpenConstScale));\n                            let action3 = cc.callFunc(() => {\n                                if (targetUI.Mask) {\n                                    targetUI.Mask.active = true;\n                                    targetUI.Mask.runAction(cc.fadeTo(0.2, this.maskColorA));\n                                }\n                                resolve(targetUI);\n                            });\n                            node.runAction(cc.sequence(action1, action2, action3));\n                        }\n                        break;\n                    case EnumUIOpenTween.FadeIn:\n                        {\n                            //动画音效\n                            AudioManager.PlaySound('S_OpenUI');\n\n                            //动画\n                            let action1 = cc.callFunc(() => {\n                                //遮罩不参与动画\n                                if (targetUI.Mask) {\n                                    targetUI.Mask.active = false;\n                                }\n                                node.opacity = 0;\n                            });\n                            let action2 = cc.fadeIn(this.feadTweenTime);\n                            let action3 = cc.callFunc(() => {\n                                if (targetUI.Mask) {\n                                    targetUI.Mask.active = true;\n                                    targetUI.Mask.runAction(cc.fadeTo(0.2, this.maskColorA));\n                                }\n                                resolve(targetUI);\n                            })\n                            node.runAction(cc.sequence(action1, action2, action3));\n                        }\n                        break;\n                    case EnumUIOpenTween.PullUp:\n                        {\n                            //动画音效\n                            // AudioManager.PlaySound('S_OpenUI');\n\n                            //动画\n                            node.setPosition(node.x, -node.parent.anchorY * node.parent.height - (1 - node.anchorY) * node.height);\n                            let action1 = cc.callFunc(() => {\n                                //遮罩不参与动画\n                                if (targetUI.Mask) {\n                                    targetUI.Mask.active = false;\n                                }\n                            });\n                            let action2 = cc.moveTo(this.pullTweenTime, node.x, -(node.parent.anchorY - 0.5) * node.parent.height + (node.anchorY - 0.5) * node.height).easing(cc.easeOut(3)); // 移动到屏幕中心\n                            let action3 = cc.callFunc(() => {\n                                if (targetUI.Mask) {\n                                    targetUI.Mask.active = true;\n                                }\n                                resolve(targetUI);\n                            });\n                            // 延迟修改，防止prefab上根节点挂的widget冲突\n                            targetUI.scheduleOnce(() => node.runAction(cc.sequence(action1, action2, action3)));\n                        }\n                        break;\n                }\n            })\n        })\n    }\n\n\n    //关闭单个UI\n    public static  CloseUI(UIClass: { new(): UIBase }): Promise<void> {\n        return new Promise(async (resolve) => {\n            let targetName = new UIClass().PrefabName\n\n            Clog.Orange(ClogKey.UI, 'Close UI  -> UIName=' + targetName)\n            let targetUI: UIBase = this.OpenedUI.find(item => item.PrefabName == targetName)\n            if (targetUI == null) {\n                Clog.Warn(ClogKey.UI, 'CloseUI -> target UI is null,name:' + targetName)\n                return\n            }\n\n            switch (targetUI.CloseTween) {\n                case EnumUICloseTween.None:\n                    {\n                        targetUI.node.destroy();\n                        ArrayRemove(this.OpenedUI, targetUI)\n                        this.PrintOpenedUIList('After Close UI :' + targetName)\n                        resolve();\n                    }\n                    break;\n                case EnumUICloseTween.Scale:\n                    {\n                        if (targetUI.Mask) {\n                            targetUI.Mask.active = false;\n                        }\n                        let CloseConstScale = targetUI.node.scale\n                        targetUI.node.runAction(cc.sequence(\n                            cc.callFunc(() => { targetUI.node.scale = CloseConstScale }),\n                            cc.scaleTo(0.1, 0.1, 0.1),\n                            cc.callFunc(() => {\n                                targetUI.node.destroy();\n                                ArrayRemove(this.OpenedUI, targetUI)\n                                this.PrintOpenedUIList('After Close UI :' + targetName)\n                                resolve();\n                            }),\n                        ))\n                    }\n                    break;\n\n                case EnumUICloseTween.FadeOut:\n                    {\n                        if (targetUI.Mask) {\n                            targetUI.Mask.active = false;\n                        }\n\n                        targetUI.node.runAction(cc.sequence(\n                            cc.fadeOut(this.feadTweenTime),\n                            cc.callFunc(() => {\n                                targetUI.node.destroy();\n                                ArrayRemove(this.OpenedUI, targetUI)\n                                this.PrintOpenedUIList('After Close UI :' + targetName)\n                                resolve();\n                            }),\n                        ))\n                    }\n                    break;\n\n                case EnumUICloseTween.PullDown:\n                    {\n                        if (targetUI.Mask) {\n                            targetUI.Mask.active = false;\n                        }\n\n                        targetUI.node.runAction(cc.sequence(\n                            cc.moveTo(this.pullTweenTime, targetUI.node.x, -targetUI.node.parent.anchorY * targetUI.node.parent.height - (1 - targetUI.node.anchorY) * targetUI.node.height).easing(cc.easeIn(3)),\n                            cc.callFunc(() => {\n                                targetUI.node.destroy();\n                                ArrayRemove(this.OpenedUI, targetUI)\n                                this.PrintOpenedUIList('After Close UI :' + targetName)\n                                resolve();\n                            }),\n                        ));\n                    }\n                    break;\n            }\n        })\n    }\n\n\n\n    //一次关闭所有UI\n    public static  CloseAll() {\n        for (let index = 0; index < this.OpenedUI.length; index++) {\n            const ui = this.OpenedUI[index];\n            ui.node.destroy()\n        }\n        this.OpenedUI = new Array<UIBase>();\n        this.PrintOpenedUIList('After Close All UI');\n    }\n\n    //调整UI层级\n    private static  SortOrder() {\n        for (let index = 0; index < this.OpenedUI.length; index++) {\n            let targetUI: UIBase = this.OpenedUI[index]\n            targetUI.node.zIndex = targetUI.HierarchyType + index * 2;\n        }\n    }\n\n    //打印已打开的UI队列\n    private static  PrintOpenedUIList(desc: string = null) {\n        if (this.OpenedUI.length <= 0) {\n            Clog.Orange(ClogKey.UI, desc + '>>> Now Opened UI List is Empty')\n            return;\n        }\n\n        let str = ''\n        for (let index = 0; index < this.OpenedUI.length; index++) {\n            const ui = this.OpenedUI[index];\n            str = str + '\\n[ name: ' + ui.PrefabName + ', zIndex: ' + ui.node.zIndex + ' ]'\n        }\n        Clog.Orange(ClogKey.UI, desc + '>>> Now  Opened UI List :' + str)\n    }\n\n    //打印正在打开的UI队列\n    private static  PrintOnOpenUIList(desc: string = null) {\n        if (this.OnOpenUITag.length <= 0) {\n            Clog.Orange(ClogKey.UI, desc + '>>> Now OnOpen UI List is Empty')\n            return;\n        }\n\n        let str = ''\n        for (let index = 0; index < this.OnOpenUITag.length; index++) {\n            const name = this.OnOpenUITag[index];\n            str = str + '\\n[ name: ' + name + ' ]'\n        }\n        Clog.Orange(ClogKey.UI, desc + '>>> Now OnOpen UI List :' + str)\n    }\n}\n\n"]}