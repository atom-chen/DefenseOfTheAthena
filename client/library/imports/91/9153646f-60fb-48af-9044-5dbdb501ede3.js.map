{"version":3,"sources":["assets\\script\\framework\\storage\\LocalStorage.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { AudioManager } from \"../audio/AudioManager\";\r\n\r\nimport Clog, { ClogKey } from \"../clog/Clog\";\r\nimport { IsNullOrEmpty } from \"../util/StringUtil\";\r\n\r\nexport class LocalStorage {\r\n\r\n    //声音音量\r\n    private static _soundVolume: number = null;\r\n    public static get SoundVolume(): number {\r\n        if (this._soundVolume == null)\r\n            this._soundVolume = LocalStorageUtil.GetNumber('SoundVolume', 1)\r\n        return this._soundVolume;\r\n    }\r\n    public static set SoundVolume(value: number) {\r\n        this._soundVolume = value\r\n        LocalStorageUtil.SetNumber('SoundVolume', this._soundVolume)\r\n        AudioManager.SetSoundVolume(value);\r\n    }\r\n\r\n    //音乐音量\r\n    private static musicVolume: number = null;\r\n    public static get MusicVolume(): number {\r\n        if (this.musicVolume == null)\r\n            this.musicVolume = LocalStorageUtil.GetNumber('MusicVolume', 1)\r\n        return this.musicVolume;\r\n    }\r\n    public static set MusicVolume(value: number) {\r\n        this.musicVolume = value\r\n        LocalStorageUtil.SetNumber('MusicVolume', this.musicVolume)\r\n        AudioManager.SetMusicVolume(value);\r\n    }\r\n\r\n}\r\n\r\n\r\nclass LocalStorageUtil {\r\n\r\n    public static SetString(key: string, stringValue: string) {\r\n        cc.sys.localStorage.setItem(key, stringValue)\r\n    }\r\n\r\n    public static GetString(key: string, defaultValue?: string) {\r\n        var str = cc.sys.localStorage.getItem(key)\r\n        if (str != null) {\r\n            return str;\r\n        }\r\n        if (str == null && defaultValue != null) {\r\n            return defaultValue;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    public static SetBool(key: string, boolValue: boolean) {\r\n        if (boolValue) {\r\n            cc.sys.localStorage.setItem(key, 'true')\r\n        }\r\n        else {\r\n            cc.sys.localStorage.setItem(key, 'false')\r\n        }\r\n    }\r\n\r\n    public static GetBool(key: string, defaultValue?: boolean): boolean {\r\n        var str = cc.sys.localStorage.getItem(key)\r\n        if (str == 'true') {\r\n            return true;\r\n        }\r\n        if (str == 'false') {\r\n            return false;\r\n        }\r\n        if (IsNullOrEmpty(str) && defaultValue != null) {\r\n            return defaultValue;\r\n        }\r\n        if (IsNullOrEmpty(str) && defaultValue == null) {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public static SetNumber(key: string, numValue: number) {\r\n        if (numValue != null) {\r\n            cc.sys.localStorage.setItem(key, numValue)\r\n        }\r\n    }\r\n\r\n    public static GetNumber(key: string, defaultValue?: number): number {\r\n        var value = cc.sys.localStorage.getItem(key)\r\n        if (value == null && defaultValue != null) {\r\n            Clog.Orange(ClogKey.LocalStorage, 'LocalStorage get Number is null or empty ,return defult false!')\r\n            return defaultValue;\r\n        }\r\n        if (value == null && defaultValue == null) {\r\n            Clog.Orange(ClogKey.LocalStorage, 'LocalStorage get Number is null ,defult is null, return -1!')\r\n            return -1;\r\n        }\r\n        let v = Number(value);\r\n        return isNaN(v) ? defaultValue : v;\r\n    }\r\n}"]}